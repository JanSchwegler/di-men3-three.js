import{S,W as k,P as D,D as M,A as O,e as R,B as v,V as P,U as b,f as A,C as T}from"./three.module-DxiGFAu0.js";import{S as z}from"./stats.module--VATS4Kh.js";import{g as F}from"./lil-gui.module.min-Bc0DeA9g.js";import{O as I}from"./OrbitControls-DZM7k9yY.js";import{G as E}from"./GLTFLoader-CZPFfvE3.js";function G(){const n=document.querySelector("#canvas");if(!n){console.error("Canvas element not found.");return}const r=new S,d=new k({antialias:!0,canvas:n}),l=new D(55,n.clientWidth/n.clientHeight,.1,100);l.position.set(0,0,2);const h=new M(16777215,1);h.position.set(1,1,1),r.add(h);const y=new O(16777215,.2);r.add(y);let p;p=new z,document.body.appendChild(p.dom);const m=new F;let o={animation:"Walk",animationOptions:["Walk","Idle"],loop:!0,restart:function(){t&&(t.stopAllAction(),o.animation==="Walk"?a.play():o.animation==="Idle"&&i.play())},stop:function(){t&&t.stopAllAction()}};m.add(o,"animation",o.animationOptions).name("Animation").onChange(e=>{t&&(e==="Walk"?(a.time=0,a.stop(),i.crossFadeTo(a,.5).play()):e==="Idle"&&(i.time=0,i.stop(),a.crossFadeTo(i,.5).play()))}),m.add(o,"loop").name("Loop").onChange(u),m.add(o,"restart").name("Restart"),m.add(o,"stop").name("Stop");const W=new E;let c,f,t,i,a;W.load("../../models/bunny/12_animations.glb",e=>{c=e.scene,f=e.animations,t=new R(c),a=t.clipAction(f[0]),i=t.clipAction(f[1]),c.position.y=new v().setFromObject(c).getSize(new P).y/-2,r.add(c),u(o.loop)},e=>{console.log(e.loaded/e.total*100+"% loaded")},e=>{console.error("An error happened",e)});function u(e){t&&(a.setLoop(e?b:A),i.setLoop(e?b:A))}const s=new I(l,d.domElement);s.listenToKeyEvents(window),s.enableDamping=!0,s.enablePan=!1,s.maxDistance=10,s.minDistance=.5;const C=new T;d.setAnimationLoop(x);function x(){const e=C.getDelta();s.update(),p.update(),t&&t.update(e),d.render(r,l)}window.addEventListener("resize",w,!1),w();function w(){const e=Math.min(window.devicePixelRatio,4),g=Math.round(n.clientWidth*e),L=Math.round(n.clientHeight*e);d.setSize(g,L,!1),n.width=g,n.height=L,l.aspect=n.clientWidth/n.clientHeight,l.updateProjectionMatrix()}}G();
