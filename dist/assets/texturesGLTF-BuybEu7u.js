import"./modulepreload-polyfill-B5Qt9EMX.js";import{S as R,W as Y,P as A,D as E,j as P,C as v,h as W,V as z,x as i,y as C,i as G}from"./three.module-B4QRWreN.js";import{S as j,O as H}from"./OrbitControls-DK21u-zh.js";import{g as O}from"./lil-gui.module.min-Bc0DeA9g.js";import{G as k}from"./GLTFLoader-7UcRDQyS.js";function B(){const a=document.querySelector("#canvas");if(!a){console.error("Canvas element not found.");return}const m=new R,p=new Y({antialias:!0,canvas:a}),c=new A(55,a.clientWidth/a.clientHeight,.1,100);c.position.set(0,0,2);const f=new E(16777215,1);f.position.set(1,1,1),m.add(f);const S=new P(16777215,.2);m.add(S);let h;h=new j,document.body.appendChild(h.dom);const r=new O;let n={roughnessmap:!0,metalnessmap:!0,emissivemap:!0,normalmap:!0,displacementmap:!0,alphamap:!0};r.add(n,"roughnessmap").name("Roughness Map").onChange(s),r.add(n,"metalnessmap").name("Metalness Map").onChange(s),r.add(n,"emissivemap").name("Emissive Map").onChange(s),r.add(n,"normalmap").name("Normal Map").onChange(s),r.add(n,"displacementmap").name("Displacement Map").onChange(s),r.add(n,"alphamap").name("Alpha Map").onChange(s);function s(){n.roughnessmap?e.children[0].children[0].material.roughnessMap=x:e.children[0].children[0].material.roughnessMap=null,n.metalnessmap?(e.children[0].children[0].material.metalness=1,e.children[0].children[0].material.metalnessMap=_):(e.children[0].children[0].material.metalness=0,e.children[0].children[0].material.metalnessMap=null),n.emissivemap?(e.children[0].children[0].material.emissive=new v(8947848),e.children[0].children[0].material.emissiveMap=u):(e.children[0].children[0].material.emissive=new v(0),e.children[0].children[0].material.emissiveMap=null),n.normalmap?e.children[0].children[0].material.normalMap=M:e.children[0].children[0].material.normalMap=null,n.displacementmap?(e.children[0].children[0].material.displacementScale=.2,e.children[0].children[0].material.displacementMap=w):e.children[0].children[0].material.displacementMap=null,n.alphamap?e.children[0].children[0].material.alphaMap=b:e.children[0].children[0].material.alphaMap=null,e.children[0].children[0].material.needsUpdate=!0}const L=new k;let e;L.load("../../models/bunny/11_textures_gltf/v12_bunny.gltf",t=>{const l=t.scene;l.position.y=new W().setFromObject(l).getSize(new z).y/-2,e=l.clone(),e.traverse(d=>{d.isMesh&&(d.material=d.material.clone())}),l.position.x=-.5,e.position.x=.5,e.children[0].children[0].material.roughnessMap.dispose(),e.children[0].children[0].material.metalnessMap.dispose(),e.children[0].children[0].material.roughnessMap=null,e.children[0].children[0].material.metalnessMap=null,e.children[0].children[0].material.transparent=!0,s(),m.add(l),m.add(e)},t=>{console.log(t.loaded/t.total*100+"% loaded")},t=>{console.error("An error happened",t)});const g=new i().load("../../models/bunny/11_textures_gltf/test_textures/body_Color.png"),x=new i().load("../../models/bunny/11_textures_gltf/test_textures/body_Roughness.png"),_=new i().load("../../models/bunny/11_textures_gltf/test_textures/body_Metallic.png"),u=new i().load("../../models/bunny/11_textures_gltf/test_textures/body_Emission.png"),M=new i().load("../../models/bunny/11_textures_gltf/test_textures/body_Normal.png"),w=new i().load("../../models/bunny/11_textures_gltf/test_textures/body_Displacement.png"),b=new i().load("../../models/bunny/11_textures_gltf/test_textures/body_Alpha.png");g.flipY=!1,x.flipY=!1,_.flipY=!1,u.flipY=!1,M.flipY=!1,w.flipY=!1,b.flipY=!1,g.colorSpace=C,u.colorSpace=C;const o=new H(c,p.domElement);o.listenToKeyEvents(window),o.enableDamping=!0,o.enablePan=!1,o.maxDistance=10,o.minDistance=.5;const T=new G;p.setAnimationLoop(D);function D(){T.getDelta(),o.update(),h.update(),p.render(m,c)}window.addEventListener("resize",y,!1),y();function y(){const t=Math.min(window.devicePixelRatio,4),l=Math.round(a.clientWidth*t),d=Math.round(a.clientHeight*t);p.setSize(l,d,!1),a.width=l,a.height=d,c.aspect=a.clientWidth/a.clientHeight,c.updateProjectionMatrix()}}B();
