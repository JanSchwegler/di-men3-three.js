import{V as _,S as K,W as Y,L as Z,P as Q,a as G,R as ee,B as te,A as ne,b as ie,c as oe,C as ae}from"./three.module-Ovx678Xv.js";import{S as re}from"./stats.module--VATS4Kh.js";import{G as se}from"./GLTFLoader-DRcDx2hr.js";import{E as le}from"./EXRLoader-BrqGqE0a.js";import{E as ce,R as de,O as ue,S as z,F as me,G as he}from"./GammaCorrectionShader-CXhsNxzJ.js";import{O as fe}from"./OrbitControls-BeonOkOq.js";let m,o,c={x:0,y:.22,z:1.2},h,V,M,u,j,i=null,a={x:-1e5,y:-1e5},X,P={x:-1e5,y:-1e5},A,x,B,S,r,f,W,l,p,D,y,O,R,L,E=.1,U=.03,k=new _,v=new _;const w=window.location.pathname.split("/"),n=document.querySelector("#canvas"),F=["/dokumentation/dokumentation","01_setup","02_line","03_responsive","04_orbit","05_nesting","06_lil-gui","07_load_gltf","08_load_bunny","09_materials","10_textures","11_textures_gltf","12_animations","13_lighting","14_background","15_userinteraction","/dist","https://github.com/JanSchwegler/di-men3-three.js"];w[1]=="di-men3-three.js"&&w[2]!="dist"||w[1]=="";function ge(){if(!n){console.error("Canvas element not found.");return}x=new oe,x.onProgress=function(s,b,g){const C=b/g*100;console.log(`Progress: ${C.toFixed(2)}% (${b} of ${g})`)},x.onLoad=function(){m.environment=j,m.add(u)},m=new K,m.background=null,h=new Y({antialias:!0,alpha:!0,premultipliedAlpha:!1,canvas:n}),h.outputColorSpace=Z,o=new Q(55,n.clientWidth/n.clientHeight,.1,100),o.position.set(c.x,c.y,c.z),o.lookAt(c.x,c.y,0),f=new ce(h),W=new de(m,o),f.addPass(W),l=new ue(new G(n.clientWidth,n.clientHeight),m,o),l.edgeStrength=3,l.edgeGlow=0,l.edgeThickness=3,l.pulsePeriod=0,l.visibleEdgeColor.set("#ffffff"),l.hiddenEdgeColor.set("#ffffff"),f.addPass(l),p=new z(me);const e=Math.min(window.devicePixelRatio,4);p.material.uniforms.resolution.value.x=1/(n.clientWidth*e),p.material.uniforms.resolution.value.y=1/(n.clientHeight*e),f.addPass(p),D=new z(he),f.addPass(D),r=new fe(o,h.domElement),r.listenToKeyEvents(window),r.enableDamping=!0,r.enablePan=!1,r.enableZoom=!0,r.maxDistance=2,r.minDistance=.8,r.enableRotate=!1,r.target.set(c.x,c.y,0),r.update(),A=new ee,new G,M=new re,document.body.appendChild(M.dom),new se(x).load("./models/control_panel/v16_control_panel.glb",s=>{u=s.scene;const b=new te().setFromObject(u).getSize(new _);if(u.position.y-=b.y*.5,u.position.x-=b.x*.5+.057,y=u.children[1].children[2].children[1].material.clone(),O=y.clone(),y.name="light_green_lit",O.emissive.set("#1CBB22"),R=u.children[1].children[3].children[1].material.clone(),L=R.clone(),R.name="light_red_lit",L.emissive.set("#CC1C1C"),w[3]=="src"){const g=Number((w[w.length-2].match(/\d+/)||[0])[0]);g>0&&g<16&&(u.children.find(C=>C.name=="button_"+(g+1).toString().padStart(2,"0")).children[3].children[1].material=L)}else u.children[15].children[3].children[1].material=L},void 0,s=>{console.error("Error loading model:",s)});const d=new ne(16777215,2);m.add(d),B=new le(x),S=new ie(h),B.load("./hdri/hdri_peppermint_powerplant_2k.exr",s=>{j=S.fromEquirectangular(s).texture,s.dispose(),S.dispose()}),V=new ae,h.setAnimationLoop(pe),window.addEventListener("resize",H,!1),H(),window.addEventListener("mousemove",J),window.addEventListener("mouseout",T),window.addEventListener("mouseleave",T),window.addEventListener("click",q),window.addEventListener("touchstart",be),window.addEventListener("touchend",xe)}function pe(){V.getDelta(),M.update(),ye(),Pe(),f.render(m,o)}function H(){const e=Math.min(window.devicePixelRatio,4),t=Math.round(n.clientWidth*e),d=Math.round(n.clientHeight*e);h.setSize(t,d,!1),n.width=t,n.height=d,r.update(),_e(),f.setSize(t,d),p.material.uniforms.resolution.value.x=1/(t*e),p.material.uniforms.resolution.value.y=1/(d*e),o.aspect=n.clientWidth/n.clientHeight,o.updateProjectionMatrix()}function we(e){const t=e.match(/button_(\d+)/);return t&&t[1]?parseInt(t[1],10):null}function $(e){const t=we(e);return t==null||t==17?null:t>1&&t<17?"/dist/src/"+F[t-1]+"/index.html":F[t-1]}function q(){if(i&&i.name.includes("button")){const e=$(i.parent.name);if(!e)return;e&&console.log("Switching to: "+e[0]),e&&setTimeout(()=>{e[0]=="h"?window.open(e,"_blank"):window.location.href=e},500)}}function be(e){J(e.touches[0]),X=Date.now(),P.x=a.x,P.y=a.y}function xe(){Date.now()-X<200&&Math.abs(P.x-a.x)<.01&&Math.abs(P.y-a.y)<.01&&q(),T()}function Le(e){const t=n.getBoundingClientRect();return{x:(e.clientX-t.left)*n.width/t.width,y:(e.clientY-t.top)*n.height/t.height}}function J(e){const t=Le(e);a.x=t.x/n.width*2-1,a.y=t.y/n.height*-2+1}function T(){a.x=-1e5,a.y=-1e5}function ve(){i.name.includes("_")?l.selectedObjects=[i]:l.selectedObjects=[i.parent.children[1]],document.body.style.cursor="pointer",$(i.parent.name)&&(i.parent.children[2].children[1].material=O)}function N(){l.selectedObjects=[],document.body.style.cursor="default"}function I(e){e==null||!e.name.includes("button")||(e.parent.children[2].children[1].material=y)}function ye(){A.setFromCamera(a,o);const e=A.intersectObjects(m.children,!0);e.length>0?i!==e[0].object&&(I(i),i=e[0].object,i.name.includes("button")?ve():N()):i!==null&&(N(),I(i),i=null)}function Pe(){a.x==-1e5||a.y==-1e5?(k.set(c.x,c.y,0),E=.02):(k.set(c.x+U*a.x,c.y+U*a.y,0),E=.1),o.getWorldDirection(v),v.add(o.position),v.lerp(k,E),o.lookAt(v)}function _e(){const e=new _(1.8,.9,.5),t=n.clientWidth/n.clientHeight,d=o.fov*(Math.PI/180),s=Math.max(e.x/(2*Math.tan(d/2)*t),e.y/(2*Math.tan(d/2)),e.z);o.position.z=.25+s*1.1,.25+s*1.1>2&&(r.maxDistance=.25+s*1.1)}ge();
