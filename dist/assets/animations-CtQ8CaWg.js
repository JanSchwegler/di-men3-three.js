import"./modulepreload-polyfill-B5Qt9EMX.js";import{S,W as k,P as v,q as M,r as O,U as R,o as D,V as P,X as b,Y as y,p as T}from"./three.module-DxaTYix-.js";import{S as z,O as F}from"./OrbitControls-DoAQgh4R.js";import{g as I}from"./lil-gui.module.min-Bc0DeA9g.js";import{G as E}from"./GLTFLoader-B-krw6he.js";function G(){const t=document.querySelector("#canvas");if(!t){console.error("Canvas element not found.");return}const r=new S,d=new k({antialias:!0,canvas:t}),l=new v(55,t.clientWidth/t.clientHeight,.1,100);l.position.set(0,0,2);const h=new M(16777215,1);h.position.set(1,1,1),r.add(h);const A=new O(16777215,.2);r.add(A);let m;m=new z,document.body.appendChild(m.dom);const p=new I;let o={animation:"Walk",animationOptions:["Walk","Idle"],loop:!1,restart:function(){n&&(n.stopAllAction(),o.animation==="Walk"?a.play():o.animation==="Idle"&&i.play())},stop:function(){n&&n.stopAllAction()}};p.add(o,"animation",o.animationOptions).name("Animation").onChange(e=>{n&&(e==="Walk"?(a.time=0,a.stop(),i.crossFadeTo(a,.5).play()):e==="Idle"&&(i.time=0,i.stop(),a.crossFadeTo(i,.5).play()))}),p.add(o,"loop").name("Loop").onChange(u),p.add(o,"restart").name("Restart"),p.add(o,"stop").name("Stop");const W=new E;let c,f,n,i,a;W.load("bunny/v01_bunny.glb",e=>{c=e.scene,f=e.animations,n=new R(c),a=n.clipAction(f[0]),i=n.clipAction(f[1]),c.position.y=new D().setFromObject(c).getSize(new P).y/-2,r.add(c),u(o.loop)},e=>{console.log(e.loaded/e.total*100+"% loaded")},e=>{console.error("An error happened",e)});function u(e){n&&(a.setLoop(e?b:y),i.setLoop(e?b:y))}const s=new F(l,d.domElement);s.listenToKeyEvents(window),s.enableDamping=!0,s.enablePan=!1,s.maxDistance=10,s.minDistance=.5;const x=new T;d.setAnimationLoop(C);function C(){const e=x.getDelta();s.update(),m.update(),n&&n.update(e),d.render(r,l)}window.addEventListener("resize",w,!1),w();function w(){const e=Math.min(window.devicePixelRatio,4),g=Math.round(t.clientWidth*e),L=Math.round(t.clientHeight*e);d.setSize(g,L,!1),t.width=g,t.height=L,l.aspect=t.clientWidth/t.clientHeight,l.updateProjectionMatrix()}}G();
