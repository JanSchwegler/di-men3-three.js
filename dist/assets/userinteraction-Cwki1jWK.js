import{S as G,W as O,L as W,P as z,a as v,R as _,B as D,V,A as $,J as q,c as X,C as Y}from"./three.module-Ovx678Xv.js";import{S as I}from"./stats.module--VATS4Kh.js";import{G as J}from"./GLTFLoader-DRcDx2hr.js";import{E as K,R as N,O as Q,S as C,F as U,G as Z}from"./GammaCorrectionShader-CXhsNxzJ.js";let s,r,w,H,x,i,y,E,A=0,l=null,a={x:-1e5,y:-1e5},k,p={x:-1e5,y:-1e5},L,b,c,M,o,u,R;const t=document.querySelector("#canvas"),P=document.querySelector("#htmlContent");function ee(){if(!t){console.error("Canvas element not found.");return}b=new X,b.onProgress=function(h,m,g){const j=m/g*100;console.log(`Progress: ${j.toFixed(2)}% (${m} of ${g})`)},s=new G,s.background=null,w=new O({antialias:!0,alpha:!0,premultipliedAlpha:!1,canvas:t}),w.outputColorSpace=W,r=new z(55,t.clientWidth/t.clientHeight,.1,100),r.position.set(0,0,2),c=new K(w),M=new N(s,r),c.addPass(M),o=new Q(new v(t.clientWidth,t.clientHeight),s,r),o.edgeStrength=1,o.edgeGlow=2,o.edgeThickness=5,o.pulsePeriod=0,o.visibleEdgeColor.set("#000000"),o.hiddenEdgeColor.set("#000000"),o.selectedObjects=s.children,c.addPass(o),u=new C(U);const e=Math.min(window.devicePixelRatio,4);u.material.uniforms.resolution.value.x=1/(t.clientWidth*e),u.material.uniforms.resolution.value.y=1/(t.clientHeight*e),c.addPass(u),R=new C(Z),c.addPass(R),L=new _,new v,x=new I,document.body.appendChild(x.dom),new J(b).load("../../models/bunny/12_animations.glb",h=>{i=h.scene,i.position.y-=new D().setFromObject(i).getSize(new V).y*.5,s.add(i);const m=h.animations.find(g=>g.name.toLowerCase()==="idle");m&&te(m)},void 0,h=>{console.error("Error loading bunny:",h)});const d=new $(16777215,2);s.add(d),H=new Y,w.setAnimationLoop(ne),window.addEventListener("resize",T,!1),T(),window.addEventListener("scroll",oe),window.addEventListener("mousemove",F),window.addEventListener("mouseout",S),window.addEventListener("mouseleave",S),window.addEventListener("click",B),window.addEventListener("touchstart",ie),window.addEventListener("touchend",ae)}function ne(){const e=H.getDelta();x.update(),y&&y.update(e),i&&(i.rotation.y=A*Math.PI*-2),re(),c.render(s,r)}function T(){const e=Math.min(window.devicePixelRatio,4),n=Math.round(t.clientWidth*e),d=Math.round(t.clientHeight*e);w.setSize(n,d,!1),t.width=n,t.height=d,c.setSize(n,d),u.material.uniforms.resolution.value.x=1/(n*e),u.material.uniforms.resolution.value.y=1/(d*e),r.aspect=t.clientWidth/t.clientHeight,r.updateProjectionMatrix()}function te(e){y=new q(i),E=y.clipAction(e),E.play()}function oe(){const e=window.pageYOffset,n=document.documentElement.scrollHeight-window.innerHeight;A=e/n}function ie(e){F(e.touches[0]),k=Date.now(),p.x=a.x,p.y=a.y}function ae(){Date.now()-k<200&&Math.abs(p.x-a.x)<.01&&Math.abs(p.y-a.y)<.01&&B(),S()}function B(){if(l)switch(l.name){case"bunny002_1":f("Bunny Body");break;case"bunny002_2":f("Bunny Head");break;case"bunny002_3":f("Bunny Eye");break;default:f("HTML Content");break}else f("HTML Content")}function f(e){if(P)for(let n=P.children.length-1;n>=0;n--)P.children[n].innerHTML=e}function se(e){const n=t.getBoundingClientRect();return{x:(e.clientX-n.left)*t.width/n.width,y:(e.clientY-n.top)*t.height/n.height}}function F(e){const n=se(e);a.x=n.x/t.width*2-1,a.y=n.y/t.height*-2+1}function S(){a.x=-1e5,a.y=-1e5}function re(){if(L.setFromCamera(a,r),i){const e=L.intersectObjects(i.children[0].children[0].children,!0);e.length>0?l!==e[0].object&&(l=e[0].object,document.body.style.cursor="pointer"):l!==null&&(l=null,document.body.style.cursor="default")}}ee();
