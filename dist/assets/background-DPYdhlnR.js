import"./modulepreload-polyfill-B5Qt9EMX.js";import{$ as k,S as C,W as x,P as L,h as y,V as E,a2 as R,x as M,j as P,C as b,i as S}from"./three.module-B4QRWreN.js";import{S as v,O as G}from"./OrbitControls-DK21u-zh.js";import{g as H}from"./lil-gui.module.min-Bc0DeA9g.js";import{G as T}from"./GLTFLoader-7UcRDQyS.js";import{E as D}from"./EXRLoader-fpuZfDsF.js";let t,c,d,f,i,g,l,p,h,u;const o=document.querySelector("#canvas"),O=new D,w=new k;w.onProgress=function(e,n,a){const s=n/a*100;console.log(`Progress: ${s.toFixed(2)}% (${n} of ${a})`)};function W(){if(!o){console.error("Canvas element not found.");return}t=new C,d=new x({antialias:!0,alpha:!0,canvas:o}),c=new L(55,o.clientWidth/o.clientHeight,.1,100),c.position.set(0,.3,3),g=new v,document.body.appendChild(g.dom),i=new G(c,d.domElement),i.listenToKeyEvents(window),i.enableDamping=!0,i.enablePan=!1,i.enableZoom=!1,new T(w).load("../../models/bunny/12_animations.glb",r=>{u=r.scene,u.position.y-=new y().setFromObject(u).getSize(new E).y*.5,t.add(u)},void 0,r=>{console.error("Error loading bunny:",r)});const n=new R(d);O.load("../../hdri/Sky.exr",r=>{p=n.fromEquirectangular(r).texture,r.dispose()},void 0,r=>{console.error("Error loading HDRI: ",r),reject(r)}),h=new M().load("../../models/bunny/11_textures_gltf/body_BaseColor_1001.png");const s=new P(16777215,2.2);t.add(s),_(),f=new S,d.setAnimationLoop(j),window.addEventListener("resize",m,!1),m()}function _(){l=new H;const e={background:"Color",backgroundOptions:["Color","Transparent","Texture","HDRI"],color:"#3a2c2e"};l.add(e,"background",e.backgroundOptions).name("Background").onChange(n);function n(a){switch(l.controllers.forEach(s=>{s.property==="color"&&s.destroy()}),a){case"Color":t.background=new b(e.color),l.addColor(e,"color").name("Color").onChange(s=>{t.background=new b(s)});break;case"Transparent":t.background=null;break;case"Texture":t.background=h;break;case"HDRI":t.background=p;break}}n(e.background)}function j(){f.getDelta(),i.update(),g.update(),d.render(t,c)}function m(){const e=Math.min(window.devicePixelRatio,4),n=Math.round(o.clientWidth*e),a=Math.round(o.clientHeight*e);d.setSize(n,a,!1),o.width=n,o.height=a,c.aspect=o.clientWidth/o.clientHeight,c.updateProjectionMatrix()}W();
