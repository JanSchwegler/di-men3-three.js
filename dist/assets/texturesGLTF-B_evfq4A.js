import"./modulepreload-polyfill-B5Qt9EMX.js";import{S as D,W as R,P as Y,q as E,r as P,i as v,o as W,V as z,K as o,N as d,p as G}from"./three.module-DxaTYix-.js";import{S as A,O as H}from"./OrbitControls-DoAQgh4R.js";import{g as N}from"./lil-gui.module.min-Bc0DeA9g.js";import{G as O}from"./GLTFLoader-B-krw6he.js";function j(){const n=document.querySelector("#canvas");if(!n){console.error("Canvas element not found.");return}const c=new D,h=new R({antialias:!0,canvas:n}),m=new Y(55,n.clientWidth/n.clientHeight,.1,100);m.position.set(0,0,2);const _=new E(16777215,1);_.position.set(1,1,1),c.add(_);const S=new P(16777215,.2);c.add(S);let u;u=new A,document.body.appendChild(u.dom);const p=new N;let t={roughnessmap:!0,metalnessmap:!0,emissivemap:!0,normalmap:!0,displacementmap:!0};p.add(t,"roughnessmap").name("Roughness Map").onChange(s),p.add(t,"metalnessmap").name("Metalness Map").onChange(s),p.add(t,"emissivemap").name("Emissive Map").onChange(s),p.add(t,"normalmap").name("Normal Map").onChange(s),p.add(t,"displacementmap").name("Displacement Map").onChange(s);function s(){t.roughnessmap?e.children[0].children[0].material.roughnessMap=f:e.children[0].children[0].material.roughnessMap=null,t.metalnessmap?(e.children[0].children[0].material.metalness=1,e.children[0].children[0].material.metalnessMap=g):(e.children[0].children[0].material.metalness=0,e.children[0].children[0].material.metalnessMap=null),t.emissivemap?(e.children[0].children[0].material.emissive=new v(8947848),e.children[0].children[0].material.emissiveMap=x):(e.children[0].children[0].material.emissive=new v(0),e.children[0].children[0].material.emissiveMap=null),t.normalmap?e.children[0].children[0].material.normalMap=w:e.children[0].children[0].material.normalMap=null,t.displacementmap?(e.children[0].children[0].material.displacementScale=.2,e.children[0].children[0].material.displacementMap=M):e.children[0].children[0].material.displacementMap=null,e.children[0].children[0].material.needsUpdate=!0}const C=new O;let e;C.load("../../models/bunny/11_textures_gltf/v12_bunny.gltf",a=>{const l=a.scene;l.position.y=new W().setFromObject(l).getSize(new z).y/-2,e=l.clone(),e.traverse(r=>{r.isMesh&&(r.material=r.material.clone())}),l.position.x=-.5,e.position.x=.5,e.children[0].children[0].material.roughnessMap.dispose(),e.children[0].children[0].material.metalnessMap.dispose(),e.children[0].children[0].material.roughnessMap=null,e.children[0].children[0].material.metalnessMap=null,s(),c.add(l),c.add(e)},a=>{console.log(a.loaded/a.total*100+"% loaded")},a=>{console.error("An error happened",a)});const b=new o().load("../../models/bunny/11_textures_gltf/test_textures/body_Color.png"),f=new o().load("../../models/bunny/11_textures_gltf/test_textures/body_Roughness.png"),g=new o().load("../../models/bunny/11_textures_gltf/test_textures/body_Metallic.png"),x=new o().load("../../models/bunny/11_textures_gltf/test_textures/body_Emission.png"),w=new o().load("../../models/bunny/11_textures_gltf/test_textures/body_Normal.png"),M=new o().load("../../models/bunny/11_textures_gltf/test_textures/body_Displacement.png");b.flipY=!1,f.flipY=!1,g.flipY=!1,x.flipY=!1,w.flipY=!1,M.flipY=!1,b.colorSpace=d,f.colorSpace=d,g.colorSpace=d,x.colorSpace=d,w.colorSpace=d,M.colorSpace=d;const i=new H(m,h.domElement);i.listenToKeyEvents(window),i.enableDamping=!0,i.enablePan=!1,i.maxDistance=10,i.minDistance=.5;const L=new G;h.setAnimationLoop(T);function T(){L.getDelta(),i.update(),u.update(),h.render(c,m)}window.addEventListener("resize",y,!1),y();function y(){const a=Math.min(window.devicePixelRatio,2),l=Math.round(n.clientWidth*a),r=Math.round(n.clientHeight*a);h.setSize(l,r,!1),n.width=l,n.height=r,m.aspect=n.clientWidth/n.clientHeight,m.updateProjectionMatrix()}}j();
