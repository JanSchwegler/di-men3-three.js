import{V as S,S as Q,W as ee,L as te,P as ne,a as G,R as ie,B as oe,A as ae,b as re,K as se,c as le,d as ce,C as de,e as ue,f as me}from"./three.module-C2ykHa-j.js";import{S as he}from"./stats.module--VATS4Kh.js";import{G as fe}from"./GLTFLoader-wxPdE2H_.js";import{E as pe}from"./EXRLoader-BMeBf7hV.js";import{E as ge,R as we,O as xe,S as W,F as be,G as Le}from"./GammaCorrectionShader-BuJRrrEB.js";import{O as ye}from"./OrbitControls-wuGkxCk8.js";let m,o,d={x:0,y:.22,z:1.2},p,$,O,u,L,C,y,D,i=null,r={x:-1e5,y:-1e5},q,R={x:-1e5,y:-1e5},j,b,F,E,l,g,U,c,w,H,_,z,A,v,M=.1,N=.03,T=new S,P=new S;const x=window.location.pathname.split("/"),n=document.querySelector("#canvas"),I=["/di-men3-three.js/dokumentation/dokumentation","01_setup","02_line","03_responsive","04_orbit","05_nesting","06_lil-gui","07_load_gltf","08_load_bunny","09_materials","10_textures","11_textures_gltf","12_animations","13_lighting","14_background","15_userinteraction","/di-men3-three.js/dist","https://github.com/JanSchwegler/di-men3-three.js"];x[1]=="di-men3-three.js"&&x[2]!="dist"||x[1]=="";function ve(){if(!n){console.error("Canvas element not found.");return}b=new ce,b.onProgress=function(a,h,f){const k=h/f*100;console.log(`Progress: ${k.toFixed(2)}% (${h} of ${f})`)},b.onLoad=function(){m.environment=D,m.add(u)},m=new Q,m.background=null,p=new ee({antialias:!0,alpha:!0,premultipliedAlpha:!1,canvas:n}),p.outputColorSpace=te,o=new ne(55,n.clientWidth/n.clientHeight,.1,100),o.position.set(d.x,d.y,d.z),o.lookAt(d.x,d.y,0),g=new ge(p),U=new we(m,o),g.addPass(U),c=new xe(new G(n.clientWidth,n.clientHeight),m,o),c.edgeStrength=3,c.edgeGlow=0,c.edgeThickness=3,c.pulsePeriod=0,c.visibleEdgeColor.set("#ffffff"),c.hiddenEdgeColor.set("#ffffff"),g.addPass(c),w=new W(be);const e=Math.min(window.devicePixelRatio,4);w.material.uniforms.resolution.value.x=1/(n.clientWidth*e),w.material.uniforms.resolution.value.y=1/(n.clientHeight*e),g.addPass(w),H=new W(Le),g.addPass(H),l=new ye(o,p.domElement),l.listenToKeyEvents(window),l.enableDamping=!0,l.enablePan=!1,l.enableZoom=!0,l.maxDistance=2,l.minDistance=.8,l.enableRotate=!1,l.target.set(d.x,d.y,0),l.update(),j=new ie,new G,O=new he,document.body.appendChild(O.dom),new fe(b).load("./models/control_panel/v17_control_panel.glb",a=>{u=a.scene;const h=new oe().setFromObject(u).getSize(new S);if(u.position.y-=h.y*.5,u.position.x-=h.x*.5+.057,L=a.animations[0],L=Ce(),console.log(L),console.log(L.tracks[0].name),_=u.children[1].children[2].children[1].material.clone(),z=_.clone(),_.name="light_green_lit",z.emissive.set("#1CBB22"),A=u.children[1].children[3].children[1].material.clone(),v=A.clone(),A.name="light_red_lit",v.emissive.set("#CC1C1C"),x[3]=="src"){const f=Number((x[x.length-2].match(/\d+/)||[0])[0]);f>0&&f<16&&(u.children.find(k=>k.name=="button_"+(f+1).toString().padStart(2,"0")).children[3].children[1].material=v)}else u.children[15].children[3].children[1].material=v},void 0,a=>{console.error("Error loading model:",a)});const s=new ae(16777215,2);m.add(s),F=new pe(b),E=new re(p),F.load("./hdri/hdri_peppermint_powerplant_2k.exr",a=>{D=E.fromEquirectangular(a).texture,a.dispose(),E.dispose()}),$=new de,p.setAnimationLoop(Pe),window.addEventListener("resize",K,!1),K(),window.addEventListener("mousemove",Z),window.addEventListener("mouseout",B),window.addEventListener("mouseleave",B),window.addEventListener("click",Y),window.addEventListener("touchstart",Re),window.addEventListener("touchend",Se)}function Pe(){const e=$.getDelta();O.update(),Ae(),Me(),C&&C.update(e),g.render(m,o)}function K(){const e=Math.min(window.devicePixelRatio,4),t=Math.round(n.clientWidth*e),s=Math.round(n.clientHeight*e);p.setSize(t,s,!1),n.width=t,n.height=s,l.update(),Te(),g.setSize(t,s),w.material.uniforms.resolution.value.x=1/(t*e),w.material.uniforms.resolution.value.y=1/(s*e),o.aspect=n.clientWidth/n.clientHeight,o.updateProjectionMatrix()}function _e(e){const t=e.match(/button_(\d+)/);return t&&t[1]?parseInt(t[1],10):null}function J(e){const t=_e(e);return t==null||t==17?null:t>1&&t<17?"/di-men3-three.js/dist/src/"+I[t-1]+"/index.html":I[t-1]}function Y(){if(i&&i.name.includes("button")){const e=J(i.parent.name);if(!e)return;C=new ue(i.parent.children[1]),y=C.clipAction(L),y.loop=me,y.clampWhenFinished=!0,y.play(),e&&setTimeout(()=>{e[0]=="h"?window.open(e,"_self"):window.location.href=e},300)}}function Ce(){const e=[0,5],t=[0,-.5],s=".position[z]",a=new se(s,e,t),h=5/30;return new le("ButtonPress",h,[a])}function Re(e){Z(e.touches[0]),q=Date.now(),R.x=r.x,R.y=r.y}function Se(){Date.now()-q<200&&Math.abs(R.x-r.x)<.01&&Math.abs(R.y-r.y)<.01&&Y(),B()}function ke(e){const t=n.getBoundingClientRect();return{x:(e.clientX-t.left)*n.width/t.width,y:(e.clientY-t.top)*n.height/t.height}}function Z(e){const t=ke(e);r.x=t.x/n.width*2-1,r.y=t.y/n.height*-2+1}function B(){r.x=-1e5,r.y=-1e5}function Ee(){i.name.includes("_")?c.selectedObjects=[i]:c.selectedObjects=[i.parent.children[1]],document.body.style.cursor="pointer",J(i.parent.name)&&(i.parent.children[2].children[1].material=z)}function V(){c.selectedObjects=[],document.body.style.cursor="default"}function X(e){e==null||!e.name.includes("button")||(e.parent.children[2].children[1].material=_)}function Ae(){j.setFromCamera(r,o);const e=j.intersectObjects(m.children,!0);e.length>0?i!==e[0].object&&(X(i),i=e[0].object,i.name.includes("button")?Ee():V()):i!==null&&(V(),X(i),i=null)}function Me(){r.x==-1e5||r.y==-1e5?(T.set(d.x,d.y,0),M=.02):(T.set(d.x+N*r.x,d.y+N*r.y,0),M=.1),o.getWorldDirection(P),P.add(o.position),P.lerp(T,M),o.lookAt(P)}function Te(){const e=new S(1.8,.9,.5),t=n.clientWidth/n.clientHeight,s=o.fov*(Math.PI/180),a=Math.max(e.x/(2*Math.tan(s/2)*t),e.y/(2*Math.tan(s/2)),e.z);o.position.z=.25+a*1.1,.25+a*1.1>2&&(l.maxDistance=.25+a*1.1)}ve();
