import"./modulepreload-polyfill-B5Qt9EMX.js";import{S as D,W as R,P,q as Y,r as E,i as S,o as W,V as z,K as r,N as m,p as G}from"./three.module-DxaTYix-.js";import{S as A,O as H}from"./OrbitControls-DoAQgh4R.js";import{g as N}from"./lil-gui.module.min-Bc0DeA9g.js";import{G as O}from"./GLTFLoader-B-krw6he.js";function j(){const a=document.querySelector("#canvas");if(!a){console.error("Canvas element not found.");return}const c=new D,u=new R({antialias:!0,canvas:a}),d=new P(55,a.clientWidth/a.clientHeight,.1,100);d.position.set(0,0,2);const x=new Y(16777215,1);x.position.set(1,1,1),c.add(x);const C=new E(16777215,.2);c.add(C);let h;h=new A,document.body.appendChild(h.dom);const p=new N;let n={roughnessmap:!0,metalnessmap:!0,emissivemap:!0,normalmap:!0,displacementmap:!0};p.add(n,"roughnessmap").name("Roughness Map").onChange(i),p.add(n,"metalnessmap").name("Metalness Map").onChange(i),p.add(n,"emissivemap").name("Emissive Map").onChange(i),p.add(n,"normalmap").name("Normal Map").onChange(i),p.add(n,"displacementmap").name("Displacement Map").onChange(i);function i(){n.roughnessmap?e.children[0].material.roughnessMap=f:e.children[0].material.roughnessMap=null,n.metalnessmap?(e.children[0].material.metalness=1,e.children[0].material.metalnessMap=g):(e.children[0].material.metalness=0,e.children[0].material.metalnessMap=null),n.emissivemap?(e.children[0].material.emissive=new S(8947848),e.children[0].material.emissiveMap=w):(e.children[0].material.emissive=new S(0),e.children[0].material.emissiveMap=null),n.normalmap?e.children[0].material.normalMap=M:e.children[0].material.normalMap=null,n.displacementmap?(e.children[0].material.displacementScale=.2,e.children[0].material.displacementMap=b):e.children[0].material.displacementMap=null,e.children[0].material.needsUpdate=!0}const _=new O;let e;_.load("bunny/v04_bunny.glb",t=>{const s=t.scene;s.rotateX(-Math.PI/2),s.position.y=new W().setFromObject(s).getSize(new z).y/-2,e=s.clone(),e.traverse(o=>{o.isMesh&&(o.material=o.material.clone())}),s.position.x=-.5,e.position.x=.5,e.children[0].material.roughnessMap.dispose(),e.children[0].material.metalnessMap.dispose(),e.children[0].material.roughnessMap=null,e.children[0].material.metalnessMap=null,i(),c.add(s),c.add(e)},t=>{console.log(t.loaded/t.total*100+"% loaded")},t=>{console.error("An error happened",t)});const y=new r().load("bunny/test_textures/body_Color.png"),f=new r().load("bunny/test_textures/body_Roughness.png"),g=new r().load("bunny/test_textures/body_Metallic.png"),w=new r().load("bunny/test_textures/body_Emission.png"),M=new r().load("bunny/test_textures/body_Normal.png"),b=new r().load("bunny/test_textures/body_Displacement.png");y.flipY=!1,f.flipY=!1,g.flipY=!1,w.flipY=!1,M.flipY=!1,b.flipY=!1,y.colorSpace=m,f.colorSpace=m,g.colorSpace=m,w.colorSpace=m,M.colorSpace=m,b.colorSpace=m;const l=new H(d,u.domElement);l.listenToKeyEvents(window),l.enableDamping=!0,l.enablePan=!1,l.maxDistance=10,l.minDistance=.5;const L=new G;u.setAnimationLoop(T);function T(){L.getDelta(),l.update(),h.update(),u.render(c,d)}window.addEventListener("resize",v,!1),v();function v(){const t=Math.min(window.devicePixelRatio,2),s=Math.round(a.clientWidth*t),o=Math.round(a.clientHeight*t);u.setSize(s,o,!1),a.width=s,a.height=o,d.aspect=a.clientWidth/a.clientHeight,d.updateProjectionMatrix()}}j();
