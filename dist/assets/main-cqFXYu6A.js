import{V as R,S as Z,W as Q,L as ee,P as te,a as z,R as ne,B as ie,A as oe,b as ae,K as re,c as se,d as le,C as ce,e as de,f as ue}from"./three.module-C2ykHa-j.js";import{G as me}from"./GLTFLoader-wxPdE2H_.js";import{E as he}from"./EXRLoader-BMeBf7hV.js";import{E as fe,R as pe,O as ge,S as B,F as we,G as xe}from"./GammaCorrectionShader-BuJRrrEB.js";import{O as be}from"./OrbitControls-wuGkxCk8.js";let m,o,d={x:0,y:.22,z:1.2},p,V,u,X,_,L,G,i=null,r={x:-1e5,y:-1e5},$,C={x:-1e5,y:-1e5},T,b,W,S,l,g,D,c,w,F,P,O,k,v,A=.1,U=.03,M=new R,y=new R;const x=window.location.pathname.split("/"),n=document.querySelector("#canvas"),H=["/di-men3-three.js/dokumentation/dokumentation","01_setup","02_line","03_responsive","04_orbit","05_nesting","06_lil-gui","07_load_gltf","08_load_bunny","09_materials","10_textures","11_textures_gltf","12_animations","13_lighting","14_background","15_userinteraction","/di-men3-three.js/dist","https://github.com/JanSchwegler/di-men3-three.js"];x[1]=="di-men3-three.js"&&x[2]!="dist"||x[1]=="";function Le(){if(!n){console.error("Canvas element not found.");return}b=new le,b.onProgress=function(a,h,f){const E=h/f*100;console.log(`Progress: ${E.toFixed(2)}% (${h} of ${f})`)},b.onLoad=function(){m.environment=G,m.add(u)},m=new Z,m.background=null,p=new Q({antialias:!0,alpha:!0,premultipliedAlpha:!1,canvas:n}),p.outputColorSpace=ee,o=new te(55,n.clientWidth/n.clientHeight,.1,100),o.position.set(d.x,d.y,d.z),o.lookAt(d.x,d.y,0),g=new fe(p),D=new pe(m,o),g.addPass(D),c=new ge(new z(n.clientWidth,n.clientHeight),m,o),c.edgeStrength=3,c.edgeGlow=0,c.edgeThickness=3,c.pulsePeriod=0,c.visibleEdgeColor.set("#ffffff"),c.hiddenEdgeColor.set("#ffffff"),g.addPass(c),w=new B(we);const e=Math.min(window.devicePixelRatio,4);w.material.uniforms.resolution.value.x=1/(n.clientWidth*e),w.material.uniforms.resolution.value.y=1/(n.clientHeight*e),g.addPass(w),F=new B(xe),g.addPass(F),l=new be(o,p.domElement),l.listenToKeyEvents(window),l.enableDamping=!0,l.enablePan=!1,l.enableZoom=!0,l.maxDistance=2,l.minDistance=.8,l.enableRotate=!1,l.target.set(d.x,d.y,0),l.update(),T=new ne,new z,new me(b).load("./models/control_panel/v18_control_panel.glb",a=>{u=a.scene;const h=new ie().setFromObject(u).getSize(new R);if(u.position.y-=h.y*.5,u.position.x-=h.x*.5+.057,X=Pe(),P=u.children[1].children[2].children[1].material.clone(),O=P.clone(),P.name="light_green_lit",O.emissive.set("#1CBB22"),k=u.children[1].children[3].children[1].material.clone(),v=k.clone(),k.name="light_red_lit",v.emissive.set("#CC1C1C"),x[3]=="src"){const f=Number((x[x.length-2].match(/\d+/)||[0])[0]);f>0&&f<16&&(u.children.find(E=>E.name=="button_"+(f+1).toString().padStart(2,"0")).children[3].children[1].material=v)}else u.children[15].children[3].children[1].material=v},void 0,a=>{console.error("Error loading model:",a)});const s=new oe(16777215,2);m.add(s),W=new he(b),S=new ae(p),W.load("./hdri/hdri_peppermint_powerplant_2k.exr",a=>{G=S.fromEquirectangular(a).texture,a.dispose(),S.dispose()}),V=new ce,p.setAnimationLoop(ve),window.addEventListener("resize",N,!1),N(),window.addEventListener("mousemove",Y),window.addEventListener("mouseout",j),window.addEventListener("mouseleave",j),window.addEventListener("click",J),window.addEventListener("touchstart",_e),window.addEventListener("touchend",Ce)}function ve(){const e=V.getDelta();_&&_.update(e),Se(),ke(),g.render(m,o)}function N(){const e=Math.min(window.devicePixelRatio,4),t=Math.round(n.clientWidth*e),s=Math.round(n.clientHeight*e);p.setSize(t,s,!1),n.width=t,n.height=s,l.update(),Ae(),g.setSize(t,s),w.material.uniforms.resolution.value.x=1/(t*e),w.material.uniforms.resolution.value.y=1/(s*e),o.aspect=n.clientWidth/n.clientHeight,o.updateProjectionMatrix()}function ye(e){const t=e.match(/button_(\d+)/);return t&&t[1]?parseInt(t[1],10):null}function q(e){const t=ye(e);return t==null||t==17?null:t>1&&t<17?"/di-men3-three.js/dist/src/"+H[t-1]+"/index.html":H[t-1]}function J(){if(i&&i.name.includes("button")){const e=q(i.parent.name);if(!e)return;_=new de(i.parent.children[1]),L=_.clipAction(X),L.loop=ue,L.clampWhenFinished=!0,L.play(),e&&setTimeout(()=>{e[0]=="h"?window.open(e,"_self"):window.location.href=e},300)}}function Pe(){const e=[0,5],t=[0,-.5],s=".position[z]",a=new re(s,e,t),h=5/30;return new se("ButtonPress",h,[a])}function _e(e){Y(e.touches[0]),$=Date.now(),C.x=r.x,C.y=r.y}function Ce(){Date.now()-$<200&&Math.abs(C.x-r.x)<.01&&Math.abs(C.y-r.y)<.01&&J(),j()}function Re(e){const t=n.getBoundingClientRect();return{x:(e.clientX-t.left)*n.width/t.width,y:(e.clientY-t.top)*n.height/t.height}}function Y(e){const t=Re(e);r.x=t.x/n.width*2-1,r.y=t.y/n.height*-2+1}function j(){r.x=-1e5,r.y=-1e5}function Ee(){i.name.includes("_")?c.selectedObjects=[i]:c.selectedObjects=[i.parent.children[1]],document.body.style.cursor="pointer",q(i.parent.name)&&(i.parent.children[2].children[1].material=O)}function I(){c.selectedObjects=[],document.body.style.cursor="default"}function K(e){e==null||!e.name.includes("button")||(e.parent.children[2].children[1].material=P)}function Se(){T.setFromCamera(r,o);const e=T.intersectObjects(m.children,!0);e.length>0?i!==e[0].object&&(K(i),i=e[0].object,i.name.includes("button")?Ee():I()):i!==null&&(I(),K(i),i=null)}function ke(){r.x==-1e5||r.y==-1e5?(M.set(d.x,d.y,0),A=.02):(M.set(d.x+U*r.x,d.y+U*r.y,0),A=.1),o.getWorldDirection(y),y.add(o.position),y.lerp(M,A),o.lookAt(y)}function Ae(){const e=new R(1.8,.9,.5),t=n.clientWidth/n.clientHeight,s=o.fov*(Math.PI/180),a=Math.max(e.x/(2*Math.tan(s/2)*t),e.y/(2*Math.tan(s/2)),e.z);o.position.z=.25+a*1.1,.25+a*1.1>2&&(l.maxDistance=.25+a*1.1)}Le();
