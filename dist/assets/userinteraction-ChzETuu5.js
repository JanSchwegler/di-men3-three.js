import"./modulepreload-polyfill-B5Qt9EMX.js";import{ac as P,au as T,$ as H,S as k,W as A,P as R,h as j,V as B,j as F,z,i as W}from"./three.module-C690gTMf.js";import{S as O}from"./stats.module--VATS4Kh.js";import{G as _}from"./GLTFLoader-B2ZjoZW7.js";let d,r,u,L,w,i,h,y,x=0,c=null,a={x:-1e5,y:-1e5},v,m={x:-1e5,y:-1e5};const t=document.querySelector("#canvas"),f=document.querySelector("#htmlContent"),b=new P;new T;const M=new H;M.onProgress=function(e,n,o){const l=n/o*100;console.log(`Progress: ${l.toFixed(2)}% (${n} of ${o})`)};function $(){if(!t){console.error("Canvas element not found.");return}d=new k,d.background=null,u=new A({antialias:!0,alpha:!0,premultipliedAlpha:!1,canvas:t}),r=new R(55,t.clientWidth/t.clientHeight,.1,100),r.position.set(0,0,2),w=new O,document.body.appendChild(w.dom),new _(M).load("../../models/bunny/12_animations.glb",o=>{i=o.scene,i.position.y-=new j().setFromObject(i).getSize(new B).y*.5,d.add(i);const l=o.animations.find(S=>S.name.toLowerCase()==="idle");l&&G(l)},void 0,o=>{console.error("Error loading bunny:",o)});const n=new F(16777215,2);d.add(n),L=new W,u.setAnimationLoop(D),window.addEventListener("resize",p,!1),p(),window.addEventListener("scroll",V),window.addEventListener("mousemove",E),window.addEventListener("mouseout",g),window.addEventListener("mouseleave",g),window.addEventListener("click",()=>C(c)),window.addEventListener("touchstart",q),window.addEventListener("touchend",Y)}function D(){const e=L.getDelta();w.update(),h&&h.update(e),i&&(i.rotation.y=x*Math.PI*-2),X(),u.render(d,r)}function p(){const e=Math.min(window.devicePixelRatio,4),n=Math.round(t.clientWidth*e),o=Math.round(t.clientHeight*e);u.setSize(n,o,!1),t.width=n,t.height=o,r.aspect=t.clientWidth/t.clientHeight,r.updateProjectionMatrix()}function G(e){h=new z(i),y=h.clipAction(e),y.play()}function V(){const e=window.pageYOffset,n=document.documentElement.scrollHeight-window.innerHeight;x=e/n}function q(e){E(e.touches[0]),v=Date.now(),m.x=a.x,m.y=a.y}function Y(){Date.now()-v<200&&Math.abs(m.x-a.x)<.01&&Math.abs(m.y-a.y)<.01&&C(c),g()}function C(e){if(e)switch(e.name){case"bunny002_1":s("Bunny Body");break;case"bunny002_2":s("Bunny Head");break;case"bunny002_3":s("Bunny Eye");break;default:s("HTML Content");break}else s("HTML Content")}function s(e){if(f)for(let n=f.children.length-1;n>=0;n--)f.children[n].innerHTML=e}function I(e){const n=t.getBoundingClientRect();return{x:(e.clientX-n.left)*t.width/n.width,y:(e.clientY-n.top)*t.height/n.height}}function E(e){const n=I(e);a.x=n.x/t.width*2-1,a.y=n.y/t.height*-2+1}function g(){a.x=-1e5,a.y=-1e5}function X(){if(b.setFromCamera(a,r),i){const e=b.intersectObjects(i.children[0].children[0].children,!0);e.length>0?c!==e[0].object&&(c=e[0].object,document.body.style.cursor="pointer"):c!==null&&(c=null,document.body.style.cursor="default")}}$();
