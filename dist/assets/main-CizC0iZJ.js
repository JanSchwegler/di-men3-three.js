import{V as b,S as Q,W as ee,L as te,P as ne,a as B,T as ie,R as oe,B as ae,A as re,b as se,K as le,c as ce,d as de,C as ue,e as me,f as he}from"./three.module-DxiGFAu0.js";import{G as fe}from"./GLTFLoader-CZPFfvE3.js";import{E as pe}from"./EXRLoader-TDPCqoHe.js";import{E as ge,R as we,O as xe,S as G,F as be,G as Le}from"./GammaCorrectionShader-mKtlVlor.js";import{O as Pe}from"./OrbitControls-DZM7k9yY.js";let m,a,c={x:0,y:.22,z:1.2},f,X,u,$,R,v,W,i=null,r={x:-1e5,y:-1e5},q,E={x:-1e5,y:-1e5},O,P,D,S,o,p,U,l,x,F,C,j,k,y,M=.1,H=.03,T=new b,_=new b;const L=window.location.pathname.split("/"),n=document.querySelector("#canvas"),N=["/di-men3-three.js/dokumentation/dokumentation","01_setup","02_line","03_responsive","04_orbit","05_nesting","06_lil-gui","07_load_gltf","08_load_bunny","09_materials","10_textures","11_textures_gltf","12_animations","13_lighting","14_background","15_userinteraction","/di-men3-three.js/dist","https://github.com/JanSchwegler/di-men3-three.js"];L[1]=="di-men3-three.js"&&L[2]!="dist"||L[1]=="";function ve(){if(!n){console.error("Canvas element not found.");return}P=new de,P.onProgress=function(d,g,w){const A=g/w*100;console.log(`Progress: ${A.toFixed(2)}% (${g} of ${w})`)},P.onLoad=function(){m.environment=W,m.add(u)},m=new Q,m.background=null,f=new ee({antialias:!0,alpha:!0,premultipliedAlpha:!1,canvas:n}),f.outputColorSpace=te,a=new ne(55,n.clientWidth/n.clientHeight,.1,100),a.position.set(c.x,c.y,c.z),a.lookAt(c.x,c.y,0),p=new ge(f),U=new we(m,a),p.addPass(U),l=new xe(new B(n.clientWidth,n.clientHeight),m,a),l.edgeStrength=3,l.edgeGlow=0,l.edgeThickness=3,l.pulsePeriod=0,l.visibleEdgeColor.set("#ffffff"),l.hiddenEdgeColor.set("#ffffff"),p.addPass(l),x=new G(be);const e=Math.min(window.devicePixelRatio,4);x.material.uniforms.resolution.value.x=1/(n.clientWidth*e),x.material.uniforms.resolution.value.y=1/(n.clientHeight*e),p.addPass(x),F=new G(Le),p.addPass(F),o=new Pe(a,f.domElement),o.listenToKeyEvents(window),o.enableDamping=!0,o.enablePan=!0,o.touches.ONE=ie.PAN,o.enableZoom=!0;const t=1;o.minPan=new b(-t,-t,-t),o.maxPan=new b(t,t,t),o.maxDistance=2,o.minDistance=.8,o.enableRotate=!1,o.target.set(c.x,c.y,0),o.update(),O=new oe,new B,new fe(P).load("./models/control_panel/v17_control_panel.glb",d=>{u=d.scene;const g=new ae().setFromObject(u).getSize(new b);if(u.position.y-=g.y*.5,u.position.x-=g.x*.5+.057,$=Ce(),C=u.children[1].children[2].children[1].material.clone(),j=C.clone(),C.name="light_green_lit",j.emissive.set("#1CBB22"),k=u.children[1].children[3].children[1].material.clone(),y=k.clone(),k.name="light_red_lit",y.emissive.set("#CC1C1C"),L[3]=="src"){const w=Number((L[L.length-2].match(/\d+/)||[0])[0]);w>0&&w<16&&(u.children.find(A=>A.name=="button_"+(w+1).toString().padStart(2,"0")).children[3].children[1].material=y)}else u.children[15].children[3].children[1].material=y},void 0,d=>{console.error("Error loading model:",d)});const h=new re(16777215,2);m.add(h),D=new pe(P),S=new se(f),D.load("./hdri/hdri_peppermint_powerplant_2k.exr",d=>{W=S.fromEquirectangular(d).texture,d.dispose(),S.dispose()}),X=new ue,f.setAnimationLoop(ye),window.addEventListener("resize",I,!1),I(),window.addEventListener("mousemove",Z),window.addEventListener("mouseout",z),window.addEventListener("mouseleave",z),window.addEventListener("click",Y),window.addEventListener("touchstart",Re),window.addEventListener("touchend",Ee)}function ye(){const e=X.getDelta();R&&R.update(e),ke(),Me(),p.render(m,a)}function I(){const e=Math.min(window.devicePixelRatio,4),t=Math.round(n.clientWidth*e),s=Math.round(n.clientHeight*e);f.setSize(t,s,!1),n.width=t,n.height=s,o.update(),Te(),p.setSize(t,s),x.material.uniforms.resolution.value.x=1/(t*e),x.material.uniforms.resolution.value.y=1/(s*e),a.aspect=n.clientWidth/n.clientHeight,a.updateProjectionMatrix()}function _e(e){const t=e.match(/button_(\d+)/);return t&&t[1]?parseInt(t[1],10):null}function J(e){const t=_e(e);return t==null||t==17?null:t>1&&t<17?"/di-men3-three.js/dist/src/"+N[t-1]+"/index.html":N[t-1]}function Y(){if(i&&i.name.includes("button")){const e=J(i.parent.name);if(!e)return;R=new me(i.parent.children[1]),v=R.clipAction($),v.loop=he,v.clampWhenFinished=!0,v.play(),e&&setTimeout(()=>{e[0]=="h"?window.open(e,"_self"):window.location.href=e},300)}}function Ce(){const e=[0,5],t=[0,-.5],s=".position[z]",h=new le(s,e,t),d=5/30;return new ce("ButtonPress",d,[h])}function Re(e){Z(e.touches[0]),q=Date.now(),E.x=r.x,E.y=r.y}function Ee(){Date.now()-q<200&&Math.abs(E.x-r.x)<.01&&Math.abs(E.y-r.y)<.01&&Y(),z()}function Ae(e){const t=n.getBoundingClientRect();return{x:(e.clientX-t.left)*n.width/t.width,y:(e.clientY-t.top)*n.height/t.height}}function Z(e){const t=Ae(e);r.x=t.x/n.width*2-1,r.y=t.y/n.height*-2+1}function z(){r.x=-1e5,r.y=-1e5}function Se(){i.name.includes("_")?l.selectedObjects=[i]:l.selectedObjects=[i.parent.children[1]],document.body.style.cursor="pointer",J(i.parent.name)&&(i.parent.children[2].children[1].material=j)}function K(){l.selectedObjects=[],document.body.style.cursor="default"}function V(e){e==null||!e.name.includes("button")||(e.parent.children[2].children[1].material=C)}function ke(){O.setFromCamera(r,a);const e=O.intersectObjects(m.children,!0);e.length>0?i!==e[0].object&&(V(i),i=e[0].object,i.name.includes("button")?Se():K()):i!==null&&(K(),V(i),i=null)}function Me(){r.x==-1e5||r.y==-1e5?(T.set(c.x,c.y,0),M=.02):(T.set(c.x+H*r.x,c.y+H*r.y,0),M=.1),a.getWorldDirection(_),_.add(a.position),_.lerp(T,M),a.lookAt(_)}function Te(){const e=new b(1.8,.9,.5),t=n.clientWidth/n.clientHeight,s=a.fov*(Math.PI/180),h=Math.max(e.x/(2*Math.tan(s/2)*t),e.y/(2*Math.tan(s/2)),e.z);a.position.z=.25+h*1.1,.25+h*1.1>2&&(o.maxDistance=.25+h*1.1)}ve();
