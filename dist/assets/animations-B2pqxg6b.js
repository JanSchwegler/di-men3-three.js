import"./modulepreload-polyfill-B5Qt9EMX.js";import{S,W as k,P as D,D as M,j as O,z as R,h as v,V as z,F as b,H as A,i as F}from"./three.module-C690gTMf.js";import{S as P}from"./stats.module--VATS4Kh.js";import{g as T}from"./lil-gui.module.min-Bc0DeA9g.js";import{O as H}from"./OrbitControls-Si8ZeTZU.js";import{G as I}from"./GLTFLoader-B2ZjoZW7.js";function j(){const n=document.querySelector("#canvas");if(!n){console.error("Canvas element not found.");return}const c=new S,d=new k({antialias:!0,canvas:n}),l=new D(55,n.clientWidth/n.clientHeight,.1,100);l.position.set(0,0,2);const h=new M(16777215,1);h.position.set(1,1,1),c.add(h);const y=new O(16777215,.2);c.add(y);let p;p=new P,document.body.appendChild(p.dom);const m=new T;let o={animation:"Walk",animationOptions:["Walk","Idle"],loop:!0,restart:function(){t&&(t.stopAllAction(),o.animation==="Walk"?a.play():o.animation==="Idle"&&i.play())},stop:function(){t&&t.stopAllAction()}};m.add(o,"animation",o.animationOptions).name("Animation").onChange(e=>{t&&(e==="Walk"?(a.time=0,a.stop(),i.crossFadeTo(a,.5).play()):e==="Idle"&&(i.time=0,i.stop(),a.crossFadeTo(i,.5).play()))}),m.add(o,"loop").name("Loop").onChange(u),m.add(o,"restart").name("Restart"),m.add(o,"stop").name("Stop");const W=new I;let r,f,t,i,a;W.load("../../models/bunny/12_animations.glb",e=>{r=e.scene,f=e.animations,t=new R(r),a=t.clipAction(f[0]),i=t.clipAction(f[1]),r.position.y=new v().setFromObject(r).getSize(new z).y/-2,c.add(r),u(o.loop)},e=>{console.log(e.loaded/e.total*100+"% loaded")},e=>{console.error("An error happened",e)});function u(e){t&&(a.setLoop(e?b:A),i.setLoop(e?b:A))}const s=new H(l,d.domElement);s.listenToKeyEvents(window),s.enableDamping=!0,s.enablePan=!1,s.maxDistance=10,s.minDistance=.5;const x=new F;d.setAnimationLoop(C);function C(){const e=x.getDelta();s.update(),p.update(),t&&t.update(e),d.render(c,l)}window.addEventListener("resize",w,!1),w();function w(){const e=Math.min(window.devicePixelRatio,4),g=Math.round(n.clientWidth*e),L=Math.round(n.clientHeight*e);d.setSize(g,L,!1),n.width=g,n.height=L,l.aspect=n.clientWidth/n.clientHeight,l.updateProjectionMatrix()}}j();
